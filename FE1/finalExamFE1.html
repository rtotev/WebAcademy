<html>
	<head>
		<meta charset="utf-8" />
		<title>Final exam</title>
		<link rel="stylesheet" type="text/css" href="finalExamFE1.css" />
	</head>
	<body>
		<div id="main">
			<div id="header">
				<a href="#">Начало</a>			
				<a href="#">Галерия</a>			
				<a href="#">FAQ</a>			
				<a href="#">За нас</a>			
				<a href="#">Край</a>					
			</div>
			<form method="post" name="myForm" id="myForm" action="#">		
				<table border="1" id="t2">
					<caption>Изпращане на съобщения</caption>	
					<tr>
						<th>Получател</th> 
						<td>
							<select id="taker" multiple="multiple" size="2" required="required">
								<option value="gencho">Gencho</option>						
								<option value="pencho">Pencho</option>						
								<option value="encho">Encho</option>						
								<option value="encho">Tеncho</option>						
								<option value="encho">Onufri</option>						
							</select>
						</td>				
					</tr>		
					<tr>
						<th>Подател</th>	
						<td>
							<input id="sender" name="sender" type="text" placeholder="Въведи името си" required="required" />
						</td>			
					</tr>		
					<tr>
						<td colspan="2">Съобщение</td>
					</tr>		
					<tr>
						<td colspan="2">
							<textarea name="insText" cols="50" id="message" required="required">Това бе моята идея за отминалия изпит!</textarea>						
						</td>					
					</tr>		
					<tr>
						<td colspan="2" align="right">						
							<input type="button" value="Ипрати" onclick="sending();" />				
						</td>					
					</tr>		
				</table>		
			</form>		
			<div id="tableDiv">				
				<table border="1" id="t1">
					<caption><b>Таблица съобщения</b></caption>	
						<tr bgcolor="grey">
						<th>&nbsp;</th>
						<th>Подател</th>
						<th>Относно</th>
						<th>Прочетено</th>									
				</table>
			</div>			
			<div id="footer">
				<span id="copyRights">&copy;All rights reserved</span>
				<span id="wa">Web Academy</span>			
			</div>	
		</div>
		<script>			
			function sending(){						
				var taker = document.getElementById('taker').value; 				
				var sender = document.getElementById('sender').value;
				var message = document.getElementById('message').value;							
				
				if ((taker !='') && (sender != '') && (message != '')) {					
					var options = document.getElementById('taker').options;
					for (var i=0; i < options.length; i++) {
						if (options[i].selected)
						{						
						incMessage.push([sender, message, 'не']);						
						addRow();
						}
					}									
				}
				else
				{
					alert("Не сте въвели всички данни")
				}				
			}					
			
			var incMessage = [ 
				['Йосиф Сталин','Изкупувам трактори','не'],
				['Адолф Хитлер','Искам Българска ракия','не'],
				['Чърчъл','Бомбардирайте София','не'],
				['Йосиф Сталин','Преврат - обрат','не']
			];
			
			var indexRow = 0;			
			var odd = 0;
			
			function addRow() {						
				var newRow = document.createElement('tr');
				(indexRow % 2 == 0) ? odd = 1 : odd = 0;	
				newRow.id = 'row' + indexRow;
				newRow.className = ('b1 c' + odd);
				newRow.innerHTML += '<td><input type="button" value="Виж" id="buttonRow' + indexRow + '" onclick="see(' + indexRow + ');" /></td>';
				//console.log("indexRow is" + indexRow);
				newRow.innerHTML += '<td>' + incMessage[indexRow][0]; + '</td>';
				newRow.innerHTML += '<td>' + incMessage[indexRow][1]; + '</td>';
				newRow.innerHTML += '<td id="readed' + indexRow + '">' + incMessage[indexRow][2]; + '</td>';
				//console.log(newRow);
				indexRow++;			
				document.getElementById('t1').appendChild(newRow);			
			}		
			
			for (j=0; j<=incMessage.length-1; j++) {							
				addRow();
			}	
				
			function see(number){					
				var readedMessage = document.getElementById('readed' + number);
				readedMessage.innerHTML = 'Да';
				(number%2 == 0) ? odd = 1 : odd = 0;
				document.getElementById('row' + number).className = 'c' + odd;				
				//console.log(document.getElementById("row" + number));				
			}
		</script>
	</body>
</html>